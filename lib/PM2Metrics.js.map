{"version":3,"sources":["../src/PM2Metrics.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;IAAqB;AACnB,WADmB,UACnB,GAA0B;QAAd,gEAAU,kBAAI;wCADP,YACO;;AACxB,SAAK,IAAL,GAAY,QAAQ,IAAR,IAAgB,CAAhB,CADY;AAExB,SAAK,SAAL,GAAiB,EAAjB,CAFwB;GAA1B;;AADmB,uBAMnB,qBAAK,IAAI,SAAS;AAChB,SAAK,SAAL,CAAe,IAAf,CAAoB,oBAAY,OAAZ,EAAqB,MAArB,CAA4B,UAAC,WAAD,EAAc,UAAd,EAA6B;AAC3E,kBAAY,WAAW,OAAX,CAAmB,KAAnB,EAA0B,EAA1B,CAAZ,IAA6C,QAAQ,UAAR,CAA7C,CAD2E;AAE3E,aAAO,WAAP,CAF2E;KAA7B,EAG7C,EAHiB,CAApB,EADgB;AAKhB,WAAO,IAAP,CALgB;;;AANC,uBAcnB,6BAAU;AACR,WAAO,KAAK,SAAL,CAAe,MAAf,CAAsB,UAAC,IAAD,EAAO,IAAP;wCAAsB,MAAS;KAA/B,EAAwC,EAA9D,CAAP,CADQ;;;AAdS,uBAkBnB,2BAAS;AACP,WAAO,KAAK,SAAL,CAAe,MAAf,IAAyB,KAAK,IAAL,CADzB;;;AAlBU,uBAsBnB,yBAAQ;AACN,SAAK,SAAL,GAAiB,EAAjB,CADM;AAEN,WAAO,KAAK,SAAL,CAFD;;;SAtBW","file":"PM2Metrics.js","sourcesContent":["export default class PM2Metrics {\n  constructor(options = {}) {\n    this.size = options.size || 0;\n    this.metricses = [];\n  }\n\n  push(id, metrics) {\n    this.metricses.push(Object.keys(metrics).reduce((prevMetrics, metricsKey) => {\n      prevMetrics[metricsKey.replace('$id', id)] = metrics[metricsKey];\n      return prevMetrics;\n    }, {}));\n    return this;\n  }\n\n  flatten() {\n    return this.metricses.reduce((prev, curr) => ({ ...prev, ...curr }), {});\n  }\n\n  isFull() {\n    return this.metricses.length >= this.size;\n  }\n\n  empty() {\n    this.metricses = [];\n    return this.metricses;\n  }\n}\n"]}